{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@flarum/gdpr/webpack/bootstrap","webpack://@flarum/gdpr/webpack/runtime/compat get default export","webpack://@flarum/gdpr/webpack/runtime/define property getters","webpack://@flarum/gdpr/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/gdpr/webpack/runtime/make namespace object","webpack://@flarum/gdpr/external root \"flarum.core.compat['admin/app']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/extend']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['admin/components/UserListPage']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/components/Button']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@flarum/gdpr/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@flarum/gdpr/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/app']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@flarum/gdpr/./src/common/components/RequestDataExportModal.tsx","webpack://@flarum/gdpr/external root \"flarum.core.compat['admin/components/AdminNav']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/extenders']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/models/User']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/Model']\"","webpack://@flarum/gdpr/./src/common/models/ErasureRequest.ts","webpack://@flarum/gdpr/./src/common/models/Export.ts","webpack://@flarum/gdpr/./src/common/extend.ts","webpack://@flarum/gdpr/external root \"flarum.core.compat['admin/components/AdminPage']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/Component']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@flarum/gdpr/./src/admin/components/ExtensionLink.tsx","webpack://@flarum/gdpr/./src/admin/GdprPage.tsx","webpack://@flarum/gdpr/./src/admin/models/DataType.tsx","webpack://@flarum/gdpr/./src/admin/extend.ts","webpack://@flarum/gdpr/./src/admin/index.tsx","webpack://@flarum/gdpr/./src/admin/extendUserListPage.tsx","webpack://@flarum/gdpr/./src/admin/extendAdminNav.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/UserListPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","import app from 'flarum/common/app';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport username from 'flarum/common/helpers/username';\nimport User from 'flarum/common/models/User';\nimport type Mithril from 'mithril';\nimport avatar from 'flarum/common/helpers/avatar';\n\ninterface RequestDataExportModalAttrs extends IInternalModalAttrs {\n  user: User;\n}\n\nexport default class RequestDataExportModal extends Modal<RequestDataExportModalAttrs> {\n  user!: User;\n\n  oninit(vnode: Mithril.Vnode<RequestDataExportModalAttrs>) {\n    super.oninit(vnode);\n\n    this.user = this.attrs.user;\n  }\n\n  className() {\n    return 'RequestDataModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('flarum-gdpr.lib.request_data.title', {\n      username: username(this.user),\n    });\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"User\">{avatar(this.user)}</div>\n          <p className=\"helpText\">{app.translator.trans('flarum-gdpr.lib.request_data.text')}</p>\n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary Button--block\"\n              onclick={() => this.requestExport()}\n              loading={this.loading}\n              disabled={this.loading}\n            >\n              {app.translator.trans('flarum-gdpr.lib.request_data.request_button')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  requestExport() {\n    this.loading = true;\n\n    app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/gdpr/export',\n        body: {\n          data: {\n            attributes: {\n              userId: this.user.id(),\n            },\n          },\n        },\n      })\n      .then(this.hide.bind(this), this.loaded.bind(this));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/AdminNav'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\nimport User from 'flarum/common/models/User';\n\nexport default class ErasureRequest extends Model {\n  status() {\n    return Model.attribute<string>('status').call(this);\n  }\n\n  reason() {\n    return Model.attribute<string>('reason').call(this);\n  }\n\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n\n  userConfirmedAt() {\n    return Model.attribute('userConfirmedAt', Model.transformDate).call(this);\n  }\n\n  processedAt() {\n    return Model.attribute('processedAt', Model.transformDate).call(this);\n  }\n\n  processorComment() {\n    return Model.attribute<string>('processorComment').call(this);\n  }\n\n  processedMode() {\n    return Model.attribute<string>('processedMode').call(this);\n  }\n\n  user() {\n    return Model.hasOne<User>('user').call(this);\n  }\n\n  processedBy() {\n    return Model.hasOne<User>('processedBy').call(this);\n  }\n}\n","import Model from 'flarum/common/Model';\nimport User from 'flarum/common/models/User';\n\nexport default class Export extends Model {\n  file() {\n    return Model.attribute<string>('file').call(this);\n  }\n\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate);\n  }\n\n  destroysAt() {\n    return Model.attribute('destroysAt', Model.transformDate);\n  }\n\n  user() {\n    return Model.hasOne<User>('user');\n  }\n\n  actor() {\n    return Model.hasOne<User>('actor');\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport User from 'flarum/common/models/User';\nimport ErasureRequest from './models/ErasureRequest';\nimport Export from './models/Export';\n\nexport default [\n  new Extend.Store() //\n    .add('user-erasure-requests', ErasureRequest)\n    .add('exports', Export),\n\n  new Extend.Model(User) //\n    .attribute<boolean>('canModerateExports')\n    .attribute<boolean>('anonymized')\n    .hasOne<ErasureRequest>('erasureRequest'),\n];\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/AdminPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import LinkButton from 'flarum/common/components/LinkButton';\nimport { Extension } from 'flarum/admin/AdminApplication';\nimport app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport icon from 'flarum/common/helpers/icon';\n\nexport interface ExtensionLinkAttrs {\n  extension: Extension | null;\n}\n\nexport default class ExtensionLink extends Component<ExtensionLinkAttrs> {\n  view() {\n    const { extension } = this.attrs;\n\n    if (!extension) {\n      return null;\n    }\n\n    return (\n      <Tooltip text={extension.extra['flarum-extension'].title}>\n        <LinkButton href={app.route('extension', { id: extension.id })}>\n          <span className=\"ExtensionIcon ExtensionIcon--gdpr\" style={extension.icon}>\n            {!!extension.icon && icon(extension.icon.name)}\n          </span>\n        </LinkButton>\n      </Tooltip>\n    );\n  }\n}\n","import app from 'flarum/admin/app';\nimport AdminPage, { AdminHeaderAttrs } from 'flarum/admin/components/AdminPage';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport type { IPageAttrs } from 'flarum/common/components/Page';\nimport type Mithril from 'mithril';\nimport DataType from './models/DataType';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport ExtensionLink from './components/ExtensionLink';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nexport default class GdprPage<CustomAttrs extends IPageAttrs = IPageAttrs> extends AdminPage<CustomAttrs> {\n  gdprDataTypes: DataType[] = [];\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.loadGdprDataTypes();\n  }\n\n  headerInfo(): AdminHeaderAttrs {\n    return {\n      className: 'GdprPage--header',\n      icon: 'fas fa-user-shield',\n      title: app.translator.trans('flarum-gdpr.admin.gdpr_page.heading'),\n      description: app.translator.trans('flarum-gdpr.admin.gdpr_page.description'),\n    };\n  }\n\n  loadGdprDataTypes() {\n    this.loading = true;\n    app.store.find<DataType[]>('gdpr/datatypes').then((dataTypes) => {\n      this.gdprDataTypes = dataTypes;\n      this.loading = false;\n      m.redraw();\n    });\n  }\n\n  content(): Mithril.Children {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"GdprPage\">\n        <h3>{app.translator.trans('flarum-gdpr.admin.gdpr_page.settings.heading')}</h3>\n        <p className=\"helpText\">{app.translator.trans('flarum-gdpr.admin.gdpr_page.settings.help_text')}</p>\n        <LinkButton className=\"Button\" href={app.route('extension', { id: 'flarum-gdpr' })}>\n          {app.translator.trans('flarum-gdpr.admin.gdpr_page.settings.extension_settings_button')}\n        </LinkButton>\n        <hr />\n        <h3>{app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.title')}</h3>\n        <p className=\"helpText\">{app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.help_text')}</p>\n\n        <div className=\"GdprGrid\">\n          <div class=\"GdprGrid-row\">\n            <div className=\"GdprGrid-header\">{app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.type')}</div>\n            <div className=\"GdprGrid-header\">{app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.export_description')}</div>\n            <div className=\"GdprGrid-header\">{app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.anonymize_description')}</div>\n            <div className=\"GdprGrid-header\">{app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.delete_description')}</div>\n            <div className=\"GdprGrid-header\">{app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.extension')}</div>\n          </div>\n\n          {this.gdprDataTypes.map((dataType) => (\n            <>\n              <div class=\"GdprGrid-row\">\n                <div>\n                  <Tooltip text={dataType.id()}>\n                    <span className=\"helpText\">{dataType.type()}</span>\n                  </Tooltip>\n                </div>\n                <div className=\"helpText\">{dataType.exportDescription()}</div>\n                <div className=\"helpText\">{dataType.anonymizeDescription()}</div>\n                <div className=\"helpText\">{dataType.deleteDescription()}</div>\n                <div>\n                  <ExtensionLink extension={app.data.extensions[dataType.extension()]} />\n                </div>\n              </div>\n            </>\n          ))}\n        </div>\n        <hr />\n        <h3>{app.translator.trans('flarum-gdpr.admin.gdpr_page.user_table_data.title')}</h3>\n        <p className=\"helpText\">{app.translator.trans('flarum-gdpr.admin.gdpr_page.user_table_data.help_text')}</p>\n        <div className=\"GdprUserColumnData\">Not yet implemented</div>\n      </div>\n    );\n  }\n}\n","import Model from 'flarum/common/Model';\n\nexport default class DataType extends Model {\n  type() {\n    return Model.attribute<string>('type').call(this);\n  }\n\n  exportDescription() {\n    return Model.attribute<string>('exportDescription').call(this);\n  }\n\n  anonymizeDescription() {\n    return Model.attribute<string>('anonymizeDescription').call(this);\n  }\n\n  deleteDescription() {\n    return Model.attribute<string>('deleteDescription').call(this);\n  }\n\n  extension() {\n    return Model.attribute<string | null>('extension').call(this);\n  }\n}\n","import { default as extend } from '../common/extend';\nimport Extend from 'flarum/common/extenders';\nimport GdprPage from './GdprPage';\nimport DataType from './models/DataType';\n\nexport default [\n  ...extend,\n\n  new Extend.Routes() //\n    .add('gdpr', '/gdpr', GdprPage),\n\n  new Extend.Store() //\n    .add('gdpr-datatypes', DataType),\n];\n","import app from 'flarum/admin/app';\nimport extendUserListPage from './extendUserListPage';\nimport extendAdminNav from './extendAdminNav';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('flarum-gdpr', () => {\n  app.extensionData\n    .for('flarum-gdpr')\n    .registerSetting(function () {\n      return (\n        <div className=\"Form-group\">\n          <h3>{app.translator.trans('flarum-gdpr.admin.settings.gdpr_page.title')}</h3>\n          <p className=\"helpText\">{app.translator.trans('flarum-gdpr.admin.settings.gdpr_page.help_text')}</p>\n          <LinkButton href={app.route('gdpr')} icon=\"fas fa-user-shield\" className=\"Button\">\n            {app.translator.trans('flarum-gdpr.admin.nav.gdpr_button')}\n          </LinkButton>\n        </div>\n      );\n    })\n    .registerSetting({\n      setting: 'flarum-gdpr.allow-anonymization',\n      label: app.translator.trans('flarum-gdpr.admin.settings.allow_anonymization'),\n      help: app.translator.trans('flarum-gdpr.admin.settings.allow_anonymization_help'),\n      type: 'boolean',\n    })\n    .registerSetting({\n      setting: 'flarum-gdpr.allow-deletion',\n      label: app.translator.trans('flarum-gdpr.admin.settings.allow_deletion'),\n      help: app.translator.trans('flarum-gdpr.admin.settings.allow_deletion_help'),\n      type: 'boolean',\n    })\n    .registerSetting({\n      setting: 'flarum-gdpr.default-erasure',\n      label: app.translator.trans('flarum-gdpr.admin.settings.default_erasure'),\n      help: app.translator.trans('flarum-gdpr.admin.settings.default_erasure_help'),\n      type: 'select',\n      options: {\n        anonymization: app.translator.trans('flarum-gdpr.admin.settings.default_erasure_options.anonymization'),\n        deletion: app.translator.trans('flarum-gdpr.admin.settings.default_erasure_options.deletion'),\n      },\n    })\n    .registerSetting({\n      setting: 'flarum-gdpr.default-anonymous-username',\n      type: 'string',\n      label: app.translator.trans('flarum-gdpr.admin.settings.default_anonymous_username'),\n      help: app.translator.trans('flarum-gdpr.admin.settings.default_anonymous_username_help'),\n    })\n    .registerPermission(\n      {\n        icon: 'fas fa-user-minus',\n        label: app.translator.trans('flarum-gdpr.admin.permissions.process_erasure'),\n        permission: 'processErasure',\n      },\n      'moderate'\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-file-export',\n        label: app.translator.trans('flarum-gdpr.admin.permissions.process_export_for_others'),\n        permission: 'moderateExport',\n      },\n      'moderate'\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-eye',\n        label: app.translator.trans('flarum-gdpr.admin.permissions.see_anonymized_user_badges'),\n        permission: 'seeAnonymizedUserBadges',\n        allowGuest: true,\n      },\n      'view'\n    );\n\n  extendUserListPage();\n  extendAdminNav();\n});\n","import app from 'flarum/admin/app';\nimport { extend } from 'flarum/common/extend';\nimport UserListPage from 'flarum/admin/components/UserListPage';\nimport Button from 'flarum/common/components/Button';\nimport username from 'flarum/common/helpers/username';\nimport RequestDataExportModal from '../common/components/RequestDataExportModal';\n\nexport default function extendUserListPage() {\n  extend(UserListPage.prototype, 'userActionItems', function (items, user) {\n    if (!user.canModerateExports()) return;\n    items.add(\n      'export-data',\n      <Button className=\"Button\" icon=\"fas fa-file-export\" onclick={() => app.modal.show(RequestDataExportModal, { user: user })}>\n        {app.translator.trans('flarum-gdpr.admin.userlist.columns.gdpr_actions.export', { username: username(user) })}\n      </Button>\n    );\n  });\n}\n","import app from 'flarum/admin/app';\nimport { extend } from 'flarum/common/extend';\nimport AdminNav from 'flarum/admin/components/AdminNav';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\n\nexport default function extendAdminNav() {\n  extend(AdminNav.prototype, 'items', function (items: ItemList<Mithril.Children>) {\n    items.add(\n      'gdpr',\n      <LinkButton href={app.route('gdpr')} icon=\"fas fa-user-shield\" title={app.translator.trans('flarum-gdpr.admin.gdpr.title')}>\n        {app.translator.trans('flarum-gdpr.admin.nav.gdpr_button')}\n      </LinkButton>,\n      48\n    );\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","RequestDataExportModal","_Modal","_this","_len","arguments","length","args","Array","_key","apply","concat","user","_proto","oninit","vnode","this","attrs","className","title","app","trans","username","content","_this2","m","avatar","Button","onclick","requestExport","loading","disabled","method","url","attribute","body","data","attributes","userId","id","then","hide","loaded","Modal","ErasureRequest","_Model","status","Model","reason","createdAt","userConfirmedAt","processedAt","processorComment","processedMode","processedBy","Export","file","destroysAt","actor","Extend","add","User","hasOne","ExtensionLink","_Component","view","extension","Tooltip","text","extra","LinkButton","href","style","icon","name","Component","GdprPage","_AdminPage","gdprDataTypes","loadGdprDataTypes","headerInfo","description","find","dataTypes","redraw","LoadingIndicator","class","map","dataType","'['","type","exportDescription","anonymizeDescription","deleteDescription","extensions","AdminPage","DataType","extend","registerSetting","setting","label","help","options","anonymization","deletion","registerPermission","permission","allowGuest","UserListPage","items","canModerateExports","show","AdminNav"],"sourceRoot":""}