{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@flarum/gdpr/webpack/bootstrap","webpack://@flarum/gdpr/webpack/runtime/compat get default export","webpack://@flarum/gdpr/webpack/runtime/define property getters","webpack://@flarum/gdpr/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/gdpr/webpack/runtime/make namespace object","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'admin/app')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'admin/components/UserListPage')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@flarum/gdpr/../../../node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@flarum/gdpr/../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@flarum/gdpr/../../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@flarum/gdpr/../../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/components/Form')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/app')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/components/Modal')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/helpers/username')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/components/Avatar')\"","webpack://@flarum/gdpr/./src/common/components/RequestDataExportModal.tsx","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'admin/components/AdminNav')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/components/LinkButton')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/models/User')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@flarum/gdpr/./src/common/models/ErasureRequest.ts","webpack://@flarum/gdpr/./src/common/models/Export.ts","webpack://@flarum/gdpr/./src/common/extend.ts","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'admin/components/AdminPage')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/components/Tooltip')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@flarum/gdpr/external root \"flarum.reg.get('core', 'common/components/Icon')\"","webpack://@flarum/gdpr/./src/admin/components/ExtensionLink.tsx","webpack://@flarum/gdpr/./src/admin/components/GdprPage.tsx","webpack://@flarum/gdpr/./src/admin/models/DataType.tsx","webpack://@flarum/gdpr/./src/admin/extend.tsx","webpack://@flarum/gdpr/./src/admin/index.tsx","webpack://@flarum/gdpr/./src/admin/extendUserListPage.tsx","webpack://@flarum/gdpr/./src/admin/extendAdminNav.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/UserListPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Form');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Modal');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/username');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Avatar');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Form from 'flarum/common/components/Form';\nimport app from 'flarum/common/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport username from 'flarum/common/helpers/username';\nimport Avatar from 'flarum/common/components/Avatar';\nexport default class RequestDataExportModal extends Modal {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"user\", void 0);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.user = this.attrs.user;\n  }\n  className() {\n    return 'RequestDataModal Modal--small';\n  }\n  title() {\n    return app.translator.trans('flarum-gdpr.lib.request_data.title', {\n      username: username(this.user)\n    });\n  }\n  content() {\n    return m(\"div\", {\n      className: \"Modal-body\"\n    }, m(Form, {\n      className: \"Form--centered\"\n    }, m(\"div\", {\n      className: \"User\"\n    }, m(Avatar, {\n      user: this.user\n    })), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('flarum-gdpr.lib.request_data.text')), m(\"div\", {\n      className: \"Form-group\"\n    }, m(Button, {\n      className: \"Button Button--primary Button--block\",\n      onclick: () => this.requestExport(),\n      loading: this.loading,\n      disabled: this.loading\n    }, app.translator.trans('flarum-gdpr.lib.request_data.request_button')))));\n  }\n  requestExport() {\n    this.loading = true;\n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/gdpr-exports',\n      body: {\n        data: {\n          attributes: {\n            userId: this.user.id()\n          }\n        }\n      }\n    }).then(this.hide.bind(this), this.loaded.bind(this));\n  }\n}\nflarum.reg.add('flarum-gdpr', 'common/components/RequestDataExportModal', RequestDataExportModal);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/AdminNav');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LinkButton');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/User');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","import Model from 'flarum/common/Model';\nexport default class ErasureRequest extends Model {\n  status() {\n    return Model.attribute('status').call(this);\n  }\n  reason() {\n    return Model.attribute('reason').call(this);\n  }\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n  userConfirmedAt() {\n    return Model.attribute('userConfirmedAt', Model.transformDate).call(this);\n  }\n  processedAt() {\n    return Model.attribute('processedAt', Model.transformDate).call(this);\n  }\n  processorComment() {\n    return Model.attribute('processorComment').call(this);\n  }\n  processedMode() {\n    return Model.attribute('processedMode').call(this);\n  }\n  user() {\n    return Model.hasOne('user').call(this);\n  }\n  processedBy() {\n    return Model.hasOne('processedBy').call(this);\n  }\n}\nflarum.reg.add('flarum-gdpr', 'common/models/ErasureRequest', ErasureRequest);","import Model from 'flarum/common/Model';\nexport default class Export extends Model {\n  file() {\n    return Model.attribute('file').call(this);\n  }\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate);\n  }\n  destroysAt() {\n    return Model.attribute('destroysAt', Model.transformDate);\n  }\n  user() {\n    return Model.hasOne('user');\n  }\n  actor() {\n    return Model.hasOne('actor');\n  }\n}\nflarum.reg.add('flarum-gdpr', 'common/models/Export', Export);","import Extend from 'flarum/common/extenders';\nimport User from 'flarum/common/models/User';\nimport ErasureRequest from './models/ErasureRequest';\nimport Export from './models/Export';\nexport default [new Extend.Store() //\n.add('user-erasure-requests', ErasureRequest).add('gdpr-exports', Export), new Extend.Model(User) //\n.attribute('canModerateExports').attribute('anonymized').hasOne('erasureRequest')];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/AdminPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LoadingIndicator');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Tooltip');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Icon');","import LinkButton from 'flarum/common/components/LinkButton';\nimport app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Icon from 'flarum/common/components/Icon';\nexport default class ExtensionLink extends Component {\n  view() {\n    const {\n      extension\n    } = this.attrs;\n    if (!extension) {\n      return null;\n    }\n    return m(Tooltip, {\n      text: extension.extra['flarum-extension'].title\n    }, m(LinkButton, {\n      href: app.route('extension', {\n        id: extension.id\n      })\n    }, m(\"span\", {\n      className: \"ExtensionIcon ExtensionIcon--gdpr\",\n      style: extension.icon\n    }, !!extension.icon && m(Icon, {\n      name: extension.icon.name\n    }))));\n  }\n}\nflarum.reg.add('flarum-gdpr', 'admin/components/ExtensionLink', ExtensionLink);","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport AdminPage from 'flarum/admin/components/AdminPage';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport ExtensionLink from './ExtensionLink';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Form from 'flarum/common/components/Form';\nexport default class GdprPage extends AdminPage {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"gdprDataTypes\", []);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loadGdprDataTypes();\n  }\n  headerInfo() {\n    return {\n      className: 'GdprPage--header',\n      icon: 'fas fa-user-shield',\n      title: app.translator.trans('flarum-gdpr.admin.gdpr_page.heading'),\n      description: app.translator.trans('flarum-gdpr.admin.gdpr_page.description')\n    };\n  }\n  loadGdprDataTypes() {\n    this.loading = true;\n    app.store.find('gdpr-datatypes').then(dataTypes => {\n      this.gdprDataTypes = dataTypes;\n      this.loading = false;\n      m.redraw();\n    });\n  }\n  content() {\n    if (this.loading) {\n      return m(LoadingIndicator, null);\n    }\n    return m(\"div\", {\n      className: \"GdprPage\"\n    }, m(Form, null, m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-gdpr.admin.gdpr_page.settings.heading')), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('flarum-gdpr.admin.gdpr_page.settings.help_text')), m(LinkButton, {\n      className: \"Button\",\n      href: app.route('extension', {\n        id: 'flarum-gdpr'\n      })\n    }, app.translator.trans('flarum-gdpr.admin.gdpr_page.settings.extension_settings_button'))), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.title')), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.help_text')), this.grid()), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-gdpr.admin.gdpr_page.user_table_data.title')), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('flarum-gdpr.admin.gdpr_page.user_table_data.help_text')), m(\"div\", {\n      className: \"GdprUserColumnData\"\n    }, app.translator.trans('flarum-gdpr.admin.gdpr_page.user_table_data.not_yet_implemented')))));\n  }\n  grid() {\n    return m(\"div\", {\n      className: \"GdprGrid\"\n    }, m(\"div\", {\n      class: \"GdprGrid-row\"\n    }, m(\"div\", {\n      className: \"GdprGrid-header\"\n    }, app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.type')), m(\"div\", {\n      className: \"GdprGrid-header\"\n    }, app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.export_description')), m(\"div\", {\n      className: \"GdprGrid-header\"\n    }, app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.anonymize_description')), m(\"div\", {\n      className: \"GdprGrid-header\"\n    }, app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.delete_description')), m(\"div\", {\n      className: \"GdprGrid-header\"\n    }, app.translator.trans('flarum-gdpr.admin.gdpr_page.data_types.extension'))), this.gdprDataTypes.map(dataType => m('[', null, m(\"div\", {\n      class: \"GdprGrid-row\"\n    }, m(\"div\", null, m(Tooltip, {\n      text: dataType.id()\n    }, m(\"span\", {\n      className: \"helpText\"\n    }, dataType.type()))), m(\"div\", {\n      className: \"helpText\"\n    }, dataType.exportDescription()), m(\"div\", {\n      className: \"helpText\"\n    }, dataType.anonymizeDescription()), m(\"div\", {\n      className: \"helpText\"\n    }, dataType.deleteDescription()), m(\"div\", null, m(ExtensionLink, {\n      extension: dataType.extension() ? app.data.extensions[dataType.extension()] : null\n    }))))));\n  }\n}\nflarum.reg.add('flarum-gdpr', 'admin/components/GdprPage', GdprPage);","import Model from 'flarum/common/Model';\nexport default class DataType extends Model {\n  type() {\n    return Model.attribute('type').call(this);\n  }\n  exportDescription() {\n    return Model.attribute('exportDescription').call(this);\n  }\n  anonymizeDescription() {\n    return Model.attribute('anonymizeDescription').call(this);\n  }\n  deleteDescription() {\n    return Model.attribute('deleteDescription').call(this);\n  }\n  extension() {\n    return Model.attribute('extension').call(this);\n  }\n}\nflarum.reg.add('flarum-gdpr', 'admin/models/DataType', DataType);","import { default as extend } from '../common/extend';\nimport Extend from 'flarum/common/extenders';\nimport app from 'flarum/admin/app';\nimport GdprPage from './components/GdprPage';\nimport DataType from './models/DataType';\nimport LinkButton from 'flarum/common/components/LinkButton';\nexport default [...extend, new Extend.Routes() //\n.add('gdpr', '/gdpr', GdprPage), new Extend.Store() //\n.add('gdpr-datatypes', DataType), new Extend.Admin().setting(() => ({\n  setting: 'flarum-gdpr.gdpr_page_link',\n  type: 'custom',\n  component: () => m(\"div\", {\n    className: \"Form-group\"\n  }, m(\"label\", null, app.translator.trans('flarum-gdpr.admin.settings.gdpr_page.title')), m(\"p\", {\n    className: \"helpText\"\n  }, app.translator.trans('flarum-gdpr.admin.settings.gdpr_page.help_text')), m(LinkButton, {\n    href: app.route('gdpr'),\n    icon: \"fas fa-user-shield\",\n    className: \"Button\"\n  }, app.translator.trans('flarum-gdpr.admin.nav.gdpr_button')))\n})).setting(() => ({\n  setting: 'flarum-gdpr.allow-anonymization',\n  label: app.translator.trans('flarum-gdpr.admin.settings.allow_anonymization'),\n  help: app.translator.trans('flarum-gdpr.admin.settings.allow_anonymization_help'),\n  type: 'boolean'\n})).setting(() => ({\n  setting: 'flarum-gdpr.allow-deletion',\n  label: app.translator.trans('flarum-gdpr.admin.settings.allow_deletion'),\n  help: app.translator.trans('flarum-gdpr.admin.settings.allow_deletion_help'),\n  type: 'boolean'\n})).setting(() => ({\n  setting: 'flarum-gdpr.default-erasure',\n  label: app.translator.trans('flarum-gdpr.admin.settings.default_erasure'),\n  help: app.translator.trans('flarum-gdpr.admin.settings.default_erasure_help'),\n  type: 'select',\n  options: {\n    anonymization: app.translator.trans('flarum-gdpr.admin.settings.default_erasure_options.anonymization'),\n    deletion: app.translator.trans('flarum-gdpr.admin.settings.default_erasure_options.deletion')\n  }\n})).setting(() => ({\n  setting: 'flarum-gdpr.default-anonymous-username',\n  type: 'string',\n  label: app.translator.trans('flarum-gdpr.admin.settings.default_anonymous_username'),\n  help: app.translator.trans('flarum-gdpr.admin.settings.default_anonymous_username_help')\n})).permission(() => ({\n  icon: 'fas fa-user-minus',\n  label: app.translator.trans('flarum-gdpr.admin.permissions.process_erasure'),\n  permission: 'processErasure'\n}), 'moderate').permission(() => ({\n  icon: 'fas fa-file-export',\n  label: app.translator.trans('flarum-gdpr.admin.permissions.process_export_for_others'),\n  permission: 'moderateExport'\n}), 'moderate').permission(() => ({\n  icon: 'fas fa-eye',\n  label: app.translator.trans('flarum-gdpr.admin.permissions.see_anonymized_user_badges'),\n  permission: 'seeAnonymizedUserBadges',\n  allowGuest: true\n}), 'view')];","import app from 'flarum/admin/app';\nimport extendUserListPage from './extendUserListPage';\nimport extendAdminNav from './extendAdminNav';\nexport { default as extend } from './extend';\napp.initializers.add('flarum-gdpr', () => {\n  app.registry.for('flarum-gdpr');\n  extendUserListPage();\n  extendAdminNav();\n});","import app from 'flarum/admin/app';\nimport { extend } from 'flarum/common/extend';\nimport UserListPage from 'flarum/admin/components/UserListPage';\nimport Button from 'flarum/common/components/Button';\nimport RequestDataExportModal from '../common/components/RequestDataExportModal';\nexport default function extendUserListPage() {\n  extend(UserListPage.prototype, 'userActionItems', function (items, user) {\n    if (!user.canModerateExports()) return;\n    items.add('export-data', m(Button, {\n      icon: \"fas fa-file-export\",\n      title: app.translator.trans('flarum-gdpr.admin.userlist.columns.user_actions.data_export.tooltip', {\n        username: user.displayName()\n      }, true),\n      onclick: () => app.modal.show(RequestDataExportModal, {\n        user: user\n      })\n    }, app.translator.trans('flarum-gdpr.admin.userlist.columns.user_actions.data_export.button')));\n  });\n}","import app from 'flarum/admin/app';\nimport { extend } from 'flarum/common/extend';\nimport AdminNav from 'flarum/admin/components/AdminNav';\nimport LinkButton from 'flarum/common/components/LinkButton';\nexport default function extendAdminNav() {\n  extend(AdminNav.prototype, 'items', function (items) {\n    items.add('gdpr', m(LinkButton, {\n      href: app.route('gdpr'),\n      icon: \"fas fa-user-shield\",\n      title: app.translator.trans('flarum-gdpr.admin.nav.gdpr_title')\n    }, app.translator.trans('flarum-gdpr.admin.nav.gdpr_button')), 48);\n  });\n}"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","_typeof","iterator","constructor","_defineProperty","e","r","t","i","toPrimitive","TypeError","String","toPropertyKey","configurable","writable","RequestDataExportModal","super","arguments","this","oninit","vnode","user","attrs","className","title","trans","username","content","m","onclick","requestExport","loading","disabled","method","url","attribute","body","data","attributes","userId","id","then","hide","bind","loaded","add","ErasureRequest","status","reason","createdAt","userConfirmedAt","processedAt","processorComment","processedMode","processedBy","Export","file","destroysAt","actor","hasOne","ExtensionLink","view","extension","text","extra","href","style","icon","name","GdprPage","loadGdprDataTypes","headerInfo","description","find","dataTypes","gdprDataTypes","redraw","grid","class","map","dataType","type","exportDescription","anonymizeDescription","deleteDescription","extensions","DataType","extend","setting","component","label","help","options","anonymization","deletion","permission","allowGuest","for","items","canModerateExports","displayName","show"],"sourceRoot":""}