{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@blomstra/gdpr/webpack/bootstrap","webpack://@blomstra/gdpr/webpack/runtime/compat get default export","webpack://@blomstra/gdpr/webpack/runtime/define property getters","webpack://@blomstra/gdpr/webpack/runtime/hasOwnProperty shorthand","webpack://@blomstra/gdpr/webpack/runtime/make namespace object","webpack://@blomstra/gdpr/external root \"flarum.core.compat['admin/app']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/extend']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['admin/components/UserListPage']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/components/Button']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@blomstra/gdpr/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@blomstra/gdpr/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/app']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@blomstra/gdpr/./src/common/components/RequestDataExportModal.tsx","webpack://@blomstra/gdpr/external root \"flarum.core.compat['admin/components/AdminNav']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/extenders']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/models/User']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/Model']\"","webpack://@blomstra/gdpr/./src/common/models/ErasureRequest.ts","webpack://@blomstra/gdpr/./src/common/models/Export.ts","webpack://@blomstra/gdpr/./src/common/extend.ts","webpack://@blomstra/gdpr/external root \"flarum.core.compat['admin/components/AdminPage']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@blomstra/gdpr/external root \"flarum.core.compat['common/Component']\"","webpack://@blomstra/gdpr/./src/admin/components/ExtensionLink.tsx","webpack://@blomstra/gdpr/./src/admin/GdprPage.tsx","webpack://@blomstra/gdpr/./src/admin/models/DataType.tsx","webpack://@blomstra/gdpr/./src/admin/extend.ts","webpack://@blomstra/gdpr/./src/admin/index.ts","webpack://@blomstra/gdpr/./src/admin/extendUserListPage.tsx","webpack://@blomstra/gdpr/./src/admin/extendAdminNav.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/UserListPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","import app from 'flarum/common/app';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport username from 'flarum/common/helpers/username';\nimport User from 'flarum/common/models/User';\nimport type Mithril from 'mithril';\nimport avatar from 'flarum/common/helpers/avatar';\n\ninterface RequestDataExportModalAttrs extends IInternalModalAttrs {\n  user: User;\n}\n\nexport default class RequestDataExportModal extends Modal<RequestDataExportModalAttrs> {\n  user!: User;\n\n  oninit(vnode: Mithril.Vnode<RequestDataExportModalAttrs>) {\n    super.oninit(vnode);\n\n    this.user = this.attrs.user;\n  }\n\n  className() {\n    return 'RequestDataModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('blomstra-gdpr.lib.request_data.title', {\n      username: username(this.user),\n    });\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"User\">{avatar(this.user)}</div>\n          <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.lib.request_data.text')}</p>\n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary Button--block\"\n              onclick={() => this.requestExport()}\n              loading={this.loading}\n              disabled={this.loading}\n            >\n              {app.translator.trans('blomstra-gdpr.lib.request_data.request_button')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  requestExport() {\n    this.loading = true;\n\n    app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/gdpr/export',\n        body: {\n          data: {\n            attributes: {\n              userId: this.user.id(),\n            },\n          },\n        },\n      })\n      .then(this.hide.bind(this), this.loaded.bind(this));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/AdminNav'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\nimport User from 'flarum/common/models/User';\n\nexport default class ErasureRequest extends Model {\n  status() {\n    return Model.attribute<string>('status').call(this);\n  }\n\n  reason() {\n    return Model.attribute<string>('reason').call(this);\n  }\n\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n\n  userConfirmedAt() {\n    return Model.attribute('userConfirmedAt', Model.transformDate).call(this);\n  }\n\n  processedAt() {\n    return Model.attribute('processedAt', Model.transformDate).call(this);\n  }\n\n  processorComment() {\n    return Model.attribute<string>('processorComment').call(this);\n  }\n\n  processedMode() {\n    return Model.attribute<string>('processedMode').call(this);\n  }\n\n  user() {\n    return Model.hasOne<User>('user').call(this);\n  }\n\n  processedBy() {\n    return Model.hasOne<User>('processedBy').call(this);\n  }\n}\n","import Model from 'flarum/common/Model';\nimport User from 'flarum/common/models/User';\n\nexport default class Export extends Model {\n  file() {\n    return Model.attribute<string>('file').call(this);\n  }\n\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate);\n  }\n\n  destroysAt() {\n    return Model.attribute('destroysAt', Model.transformDate);\n  }\n\n  user() {\n    return Model.hasOne<User>('user');\n  }\n\n  actor() {\n    return Model.hasOne<User>('actor');\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport User from 'flarum/common/models/User';\nimport ErasureRequest from './models/ErasureRequest';\nimport Export from './models/Export';\n\nexport default [\n  new Extend.Store() //\n    .add('user-erasure-requests', ErasureRequest)\n    .add('exports', Export),\n\n  new Extend.Model(User) //\n    .attribute<boolean>('canModerateExports')\n    .hasOne<ErasureRequest>('erasureRequest'),\n];\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/AdminPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import LinkButton from 'flarum/common/components/LinkButton';\nimport { Extension } from 'flarum/admin/AdminApplication';\nimport app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Tooltip from 'flarum/common/components/Tooltip';\n\nexport interface ExtensionLinkAttrs {\n  extension: Extension | null;\n}\n\nexport default class ExtensionLink extends Component<ExtensionLinkAttrs> {\n  view() {\n    const { extension } = this.attrs;\n\n    if (!extension) {\n      return null;\n    }\n\n    const iconName = extension.icon?.name;\n    const backgroundColor = extension.icon?.backgroundColor || 'transparent';\n    const foregroundColor = extension.icon?.color || '#000';\n\n    return (\n      <Tooltip text={extension.extra['flarum-extension'].title}>\n        <LinkButton\n          className=\"Button Button--icon\"\n          icon={iconName}\n          href={app.route('extension', { id: extension.id })}\n          style={{ backgroundColor: backgroundColor, color: foregroundColor }}\n        />\n      </Tooltip>\n    );\n  }\n}\n","import app from 'flarum/admin/app';\nimport AdminPage, { AdminHeaderAttrs } from 'flarum/admin/components/AdminPage';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport type { IPageAttrs } from 'flarum/common/components/Page';\nimport type Mithril from 'mithril';\nimport DataType from './models/DataType';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport ExtensionLink from './components/ExtensionLink';\n\nexport default class GdprPage<CustomAttrs extends IPageAttrs = IPageAttrs> extends AdminPage<CustomAttrs> {\n  gdprDataTypes: DataType[] = [];\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.loadGdprDataTypes();\n  }\n\n  headerInfo(): AdminHeaderAttrs {\n    return {\n      className: 'GdprPage--header',\n      icon: 'fas fa-user-shield',\n      title: app.translator.trans('blomstra-gdpr.admin.gdpr_page.heading'),\n      description: app.translator.trans('blomstra-gdpr.admin.gdpr_page.description'),\n    };\n  }\n\n  loadGdprDataTypes() {\n    this.loading = true;\n    app.store.find<DataType[]>('gdpr/datatypes').then((dataTypes) => {\n      this.gdprDataTypes = dataTypes;\n      this.loading = false;\n      m.redraw();\n    });\n  }\n\n  content(): Mithril.Children {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"GdprPage\">\n        <h3>{app.translator.trans('blomstra-gdpr.admin.gdpr_page.data_types.title')}</h3>\n        <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.admin.gdpr_page.data_types.help_text')}</p>\n\n        <div className=\"GdprGrid\">\n          <div class=\"GdprGrid-row\">\n            <div className=\"GdprGrid-header\">{app.translator.trans('blomstra-gdpr.admin.gdpr_page.data_types.type')}</div>\n            <div className=\"GdprGrid-header\">{app.translator.trans('blomstra-gdpr.admin.gdpr_page.data_types.export_description')}</div>\n            <div className=\"GdprGrid-header\">{app.translator.trans('blomstra-gdpr.admin.gdpr_page.data_types.anonymize_description')}</div>\n            <div className=\"GdprGrid-header\">{app.translator.trans('blomstra-gdpr.admin.gdpr_page.data_types.delete_description')}</div>\n            <div className=\"GdprGrid-header\">{app.translator.trans('blomstra-gdpr.admin.gdpr_page.data_types.extension')}</div>\n          </div>\n\n          {this.gdprDataTypes.map((dataType) => (\n            <>\n              <div class=\"GdprGrid-row\">\n                <div>\n                  <Tooltip text={dataType.id()}>\n                    <span className=\"helpText\">{dataType.type()}</span>\n                  </Tooltip>\n                </div>\n                <div className=\"helpText\">{dataType.exportDescription()}</div>\n                <div className=\"helpText\">{dataType.anonymizeDescription()}</div>\n                <div className=\"helpText\">{dataType.deleteDescription()}</div>\n                <div>\n                  <ExtensionLink extension={app.data.extensions[dataType.extension()]} />\n                </div>\n              </div>\n            </>\n          ))}\n        </div>\n        <h3>{app.translator.trans('blomstra-gdpr.admin.gdpr_page.user_table_data.title')}</h3>\n        <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.admin.gdpr_page.user_table_data.help_text')}</p>\n        <div className=\"GdprUserColumnData\">Not yet implemented</div>\n      </div>\n    );\n  }\n}\n","import Model from 'flarum/common/Model';\n\nexport default class DataType extends Model {\n  type() {\n    return Model.attribute<string>('type').call(this);\n  }\n\n  exportDescription() {\n    return Model.attribute<string>('exportDescription').call(this);\n  }\n\n  anonymizeDescription() {\n    return Model.attribute<string>('anonymizeDescription').call(this);\n  }\n\n  deleteDescription() {\n    return Model.attribute<string>('deleteDescription').call(this);\n  }\n\n  extension() {\n    return Model.attribute<string | null>('extension').call(this);\n  }\n}\n","import { default as extend } from '../common/extend';\nimport Extend from 'flarum/common/extenders';\nimport GdprPage from './GdprPage';\nimport DataType from './models/DataType';\n\nexport default [\n  ...extend,\n\n  new Extend.Routes() //\n    .add('gdpr', '/gdpr', GdprPage),\n\n  new Extend.Store() //\n    .add('gdpr-datatypes', DataType),\n];\n","import app from 'flarum/admin/app';\nimport extendUserListPage from './extendUserListPage';\nimport extendAdminNav from './extendAdminNav';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('blomstra-gdpr', () => {\n  app.extensionData\n    .for('blomstra-gdpr')\n    .registerSetting({\n      setting: 'blomstra-gdpr.allow-anonymization',\n      label: app.translator.trans('blomstra-gdpr.admin.settings.allow_anonymization'),\n      help: app.translator.trans('blomstra-gdpr.admin.settings.allow_anonymization_help'),\n      type: 'boolean',\n    })\n    .registerSetting({\n      setting: 'blomstra-gdpr.allow-deletion',\n      label: app.translator.trans('blomstra-gdpr.admin.settings.allow_deletion'),\n      help: app.translator.trans('blomstra-gdpr.admin.settings.allow_deletion_help'),\n      type: 'boolean',\n    })\n    .registerSetting({\n      setting: 'blomstra-gdpr.default-erasure',\n      label: app.translator.trans('blomstra-gdpr.admin.settings.default_erasure'),\n      help: app.translator.trans('blomstra-gdpr.admin.settings.default_erasure_help'),\n      type: 'select',\n      options: {\n        anonymization: app.translator.trans('blomstra-gdpr.admin.settings.default_erasure_options.anonymization'),\n        deletion: app.translator.trans('blomstra-gdpr.admin.settings.default_erasure_options.deletion'),\n      },\n    })\n    .registerPermission(\n      {\n        icon: 'fas fa-user-minus',\n        label: app.translator.trans('blomstra-gdpr.admin.permissions.process_erasure'),\n        permission: 'processErasure',\n      },\n      'moderate'\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-file-export',\n        label: app.translator.trans('blomstra-gdpr.admin.permissions.process_export_for_others'),\n        permission: 'moderateExport',\n      },\n      'moderate'\n    );\n\n  extendUserListPage();\n  extendAdminNav();\n});\n","import app from 'flarum/admin/app';\nimport { extend } from 'flarum/common/extend';\nimport UserListPage from 'flarum/admin/components/UserListPage';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport User from 'flarum/common/models/User';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Button from 'flarum/common/components/Button';\nimport type Mithril from 'mithril';\nimport username from 'flarum/common/helpers/username';\nimport RequestDataExportModal from '../common/components/RequestDataExportModal';\n\ntype ColumnData = {\n  /**\n   * Column title\n   */\n  name: Mithril.Children;\n  /**\n   * Component(s) to show for this column.\n   */\n  content: (user: User) => Mithril.Children;\n};\n\nexport default function extendUserListPage() {\n  extend(UserListPage.prototype, 'columns', function (columns: ItemList<ColumnData>) {\n    columns.add(\n      'gdpr',\n      {\n        name: app.translator.trans('blomstra-gdpr.admin.userlist.columns.gdpr_actions.title'),\n        content: (user: User) => {\n          return <div className=\"gdprActions\">{this.gdprActions(user).toArray()}</div>;\n        },\n      },\n      50\n    );\n  });\n\n  UserListPage.prototype.gdprActions = function (user: User): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'export-data',\n      <Tooltip text={app.translator.trans('blomstra-gdpr.admin.userlist.columns.gdpr_actions.export', { username: username(user) })}>\n        <Button className=\"Button Button--icon\" icon=\"fas fa-file-export\" onclick={() => app.modal.show(RequestDataExportModal, { user: user })} />\n      </Tooltip>\n    );\n\n    return items;\n  };\n}\n","import app from 'flarum/admin/app';\nimport { extend } from 'flarum/common/extend';\nimport AdminNav from 'flarum/admin/components/AdminNav';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\n\nexport default function extendAdminNav() {\n  extend(AdminNav.prototype, 'items', function (items: ItemList<Mithril.Children>) {\n    items.add(\n      'gdpr',\n      <LinkButton href={app.route('gdpr')} icon=\"fas fa-user-shield\" title={app.translator.trans('blomstra-gdpr.admin.gdpr.title')}>\n        {app.translator.trans('blomstra-gdpr.admin.nav.gdpr_button')}\n      </LinkButton>,\n      48\n    );\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","RequestDataExportModal","_Modal","_this","_len","arguments","length","args","Array","_key","apply","concat","user","_proto","oninit","vnode","this","attrs","className","title","app","trans","username","content","_this2","m","avatar","Button","onclick","requestExport","loading","disabled","method","url","attribute","body","data","attributes","userId","id","then","hide","loaded","Modal","ErasureRequest","_Model","status","Model","reason","createdAt","userConfirmedAt","processedAt","processorComment","processedMode","processedBy","Export","file","destroysAt","actor","Extend","add","User","hasOne","ExtensionLink","_Component","view","_extension$icon","_extension$icon2","_extension$icon3","extension","iconName","icon","name","backgroundColor","foregroundColor","color","Tooltip","text","extra","LinkButton","href","style","Component","GdprPage","_AdminPage","gdprDataTypes","loadGdprDataTypes","headerInfo","description","find","dataTypes","redraw","LoadingIndicator","class","map","dataType","'['","type","exportDescription","anonymizeDescription","deleteDescription","extensions","AdminPage","DataType","extend","registerSetting","setting","label","help","options","anonymization","deletion","registerPermission","permission","UserListPage","columns","gdprActions","toArray","items","ItemList","show","AdminNav"],"sourceRoot":""}